# AetherLink v1.0 - Production Validation Checklist

## üéØ Objective
Verify all v1.0 features work end-to-end before starting Phase II development.

---

## ‚úÖ Pre-Validation Setup

### 1. All Services Running
```powershell
docker ps --filter "name=aether" --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
```
**Expected**: All core services showing "Up" or "healthy"

### 2. Health Checks Pass
```powershell
.\scripts\verify-health.ps1
```
**Expected**: All green checkmarks

---

## üß™ Feature Validation Tests

### Test 1: AI Extract ‚Üí Create Lead (End-to-End)

**Steps**:
1. Open http://localhost:5173
2. Authenticate with Keycloak
3. Click "‚ú® Create New Lead (with AI Extract)" panel
4. Paste test data:
   ```
   Sarah Chen
   Director of Engineering
   TechStart Inc
   sarah.chen@techstart.io
   415-555-0199
   Warm intro from Mike at CloudConf 2024
   ```
5. Click "Run AI Extract"
6. Verify fields autofill:
   - Name: Sarah Chen (or extracted value)
   - Email: sarah.chen@techstart.io
   - Company: TechStart Inc (if extracted)
   - Status: new
7. Click "‚úÖ Create Lead"
8. Wait for UI to refresh
9. Verify new lead appears in table

**‚úÖ PASS / ‚ùå FAIL**: __________

**Notes**: _____________________________________________

---

### Test 2: AI Summary (Lead Analysis)

**Steps**:
1. Click on any existing lead in the table
2. Lead drawer opens on right side
3. Click "‚ú® AI Summary" button
4. Wait ~2-5 seconds
5. Verify purple summary box appears
6. Check summary text (stub mode or real Claude)

**Expected (Stub Mode)**:
- Message about "No Claude API key configured"

**Expected (Real Claude)**:
- Natural language summary of lead activity
- Mentions recent status changes, notes, or assignments

**‚úÖ PASS / ‚ùå FAIL**: __________

**Notes**: _____________________________________________

---

### Test 3: AI Note Write-Back

**Steps**:
1. With lead drawer open from Test 2
2. If AI summary is showing, click "üì• Add to timeline"
3. Wait for "Saving..." to finish
4. Scroll down to "Activity Timeline" section
5. Verify new note appears at top with AI summary text
6. Note should show as authored by your user

**‚úÖ PASS / ‚ùå FAIL**: __________

**Notes**: _____________________________________________

---

### Test 4: Notifications Rules (Hot Reload)

**Steps**:
1. Check current rules:
   ```powershell
   Invoke-RestMethod -Uri "http://localhost:9107/rules" -Method Get
   ```
2. Edit `services/notifications-consumer/rules.yaml`
3. Add a test rule:
   ```yaml
   - name: test-rule-validation
     match:
       event_type: lead.created
     notify: true
     template: "TEST: New lead {lead_id}"
   ```
4. Reload rules:
   ```powershell
   Invoke-RestMethod -Uri "http://localhost:9107/rules/reload" -Method Post
   ```
5. Verify count increased by 1
6. Check logs:
   ```powershell
   docker logs aether-notifications-consumer --tail 10
   ```
7. Look for "reloaded N rules" message

**‚úÖ PASS / ‚ùå FAIL**: __________

**Notes**: _____________________________________________

---

### Test 5: Event Flow (Kafka ‚Üí Sink ‚Üí Logs)

**Steps**:
1. Create a new lead (via Test 1 or manually in UI)
2. Check ApexFlow logs:
   ```powershell
   docker logs aether-apexflow --tail 20 | Select-String "lead.created"
   ```
3. Check Events Sink logs:
   ```powershell
   docker logs aether-crm-events-sink --tail 20 | Select-String "lead.created"
   ```
4. Verify event appears in both logs within ~2 seconds

**‚úÖ PASS / ‚ùå FAIL**: __________

**Notes**: _____________________________________________

---

### Test 6: Grafana Observability

**Steps**:
1. Open http://localhost:3000 (Grafana)
2. Login (default: admin/admin)
3. Navigate to "Explore"
4. Select Loki data source
5. Run query:
   ```logql
   {service="notifications-consumer"} |= "matched rule="
   ```
6. Verify logs appear with rule names
7. Try another query:
   ```logql
   {service="ai-summarizer"} |= "POST /summaries"
   ```
8. Verify AI service requests appear

**‚úÖ PASS / ‚ùå FAIL**: __________

**Notes**: _____________________________________________

---

## üîç Edge Case Testing

### Test 7: AI Extract with Minimal Data

**Paste this**:
```
john@example.com
```

**Expected**: Email extracted, name shows "(unknown)", company null

**‚úÖ PASS / ‚ùå FAIL**: __________

---

### Test 8: Create Lead Without AI Extract

**Steps**:
1. Manually type in form fields without using AI Extract
2. Fill only Name and Email
3. Click "‚úÖ Create Lead"
4. Verify lead created successfully

**‚úÖ PASS / ‚ùå FAIL**: __________

---

### Test 9: AI Summary on Brand New Lead

**Steps**:
1. Create a lead with no activity yet
2. Immediately open drawer and click AI Summary
3. Verify graceful handling (stub message or "no activity yet")

**‚úÖ PASS / ‚ùå FAIL**: __________

---

## üõ°Ô∏è Error Handling Validation

### Test 10: Service Restart Recovery

**Steps**:
1. Stop AI Summarizer:
   ```powershell
   docker stop aether-ai-summarizer
   ```
2. Try clicking "‚ú® AI Summary" in UI
3. Verify error message appears (not crash)
4. Restart service:
   ```powershell
   docker start aether-ai-summarizer
   ```
5. Wait 10 seconds
6. Try AI Summary again - should work

**‚úÖ PASS / ‚ùå FAIL**: __________

---

## üìä Performance Validation

### Test 11: Response Time Measurements

**Measure these**:
```powershell
# AI Extract
Measure-Command {
  Invoke-RestMethod -Method Post -Uri "http://localhost:9108/summaries/extract-lead" `
    -ContentType "application/json" `
    -Body '{"tenant_id":"acme","raw_text":"Jane Doe jane@acme.com"}'
}

# Lead Creation
Measure-Command {
  Invoke-RestMethod -Method Post -Uri "http://localhost:8080/leads" `
    -Headers @{"x-tenant-id"="acme"} `
    -ContentType "application/json" `
    -Body '{"name":"Test Lead","email":"test@test.com","status":"new"}'
}
```

**Expected**:
- AI Extract: < 3 seconds (stub mode)
- Lead Creation: < 1 second

**Actual Times**:
- AI Extract: __________ seconds
- Lead Creation: __________ seconds

---

## üéØ v1.0 Validation Summary

| Test | Status | Notes |
|------|--------|-------|
| 1. AI Extract ‚Üí Create Lead | ‚¨ú | |
| 2. AI Summary | ‚¨ú | |
| 3. AI Note Write-Back | ‚¨ú | |
| 4. Notifications Hot Reload | ‚¨ú | |
| 5. Event Flow (Kafka) | ‚¨ú | |
| 6. Grafana Observability | ‚¨ú | |
| 7. Minimal Data Handling | ‚¨ú | |
| 8. Manual Lead Creation | ‚¨ú | |
| 9. New Lead Summary | ‚¨ú | |
| 10. Service Recovery | ‚¨ú | |
| 11. Performance | ‚¨ú | |

**Overall Status**: ‚¨ú READY FOR PRODUCTION / ‚¨ú NEEDS FIXES

---

## üöÄ Post-Validation Actions

### If All Tests Pass ‚úÖ
1. Tag release in Git:
   ```bash
   git tag -a v1.0.0 -m "AetherLink v1.0: AI-Powered CRM"
   git push origin v1.0.0
   ```
2. Create GitHub release with release notes
3. Backup current `rules.yaml`
4. Document any Claude API key setup needed
5. **THEN** proceed to Phase II planning

### If Tests Fail ‚ùå
1. Document failures in this checklist
2. Create issues list
3. Fix issues before Phase II
4. Re-run failed tests
5. Update documentation with fixes

---

## üîÆ Ready for Phase II?

Once **all tests pass**, you can confidently move to Phase II knowing:
- ‚úÖ Core AI features work end-to-end
- ‚úÖ Event flow is validated
- ‚úÖ Observability is functional
- ‚úÖ System is stable under normal operations
- ‚úÖ Error handling is graceful

**Phase II can build on a solid foundation!**
